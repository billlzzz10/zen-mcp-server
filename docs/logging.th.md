# การบันทึกล็อก (Logging)

## เริ่มต้นอย่างรวดเร็ว – ติดตามล็อกแบบเรียลไทม์

วิธีง่ายที่สุดในการดูล็อกคือใช้ธง `-f` ตอนสตาร์ทเซิร์ฟเวอร์:

```bash
./run-server.sh -f
```

คำสั่งนี้จะเปิดเซิร์ฟเวอร์และเริ่ม tail ล็อกของ MCP ในทันที

## ไฟล์ล็อกที่มีให้

ล็อกถูกเก็บไว้ในไดเรกทอรี `logs/` ภายในโปรเจ็กต์:

- **`mcp_server.log`** – รายละเอียดการทำงานหลัก การเรียก API และข้อผิดพลาด
- **`mcp_activity.log`** – บันทึกการเรียกใช้เครื่องมือและการติดตามบทสนทนา

ไฟล์ล็อกจะหมุน (rotate) อัตโนมัติเมื่อมีขนาดถึง 20MB และเก็บไฟล์ย้อนหลังสูงสุด 10 ชุด

## วิธีดูล็อก

```bash
# ติดตามแบบเรียลไทม์
tail -f logs/mcp_server.log

# ดู 100 บรรทัดล่าสุด
tail -n 100 logs/mcp_server.log

# ดูเฉพาะกิจกรรมของเครื่องมือ
tail -f logs/mcp_activity.log

# ค้นหาล็อกที่มีคำว่า ERROR
grep "ERROR" logs/mcp_server.log
grep "tool_name" logs/mcp_activity.log
```

## การตั้งค่าระดับล็อก

ตั้งความละเอียดของข้อความล็อกผ่านตัวแปร `LOG_LEVEL` ใน `.env`:

```env
LOG_LEVEL=INFO   # ค่าที่รองรับ: DEBUG, INFO, WARNING, ERROR
```

- **DEBUG** – ข้อมูลละเอียดเพื่อการดีบัก
- **INFO** – ข้อความการทำงานทั่วไป (ค่าเริ่มต้น)
- **WARNING** – แจ้งเตือน
- **ERROR** – ข้อผิดพลาดเท่านั้น

## รูปแบบของล็อก

ล็อกใช้รูปแบบมาตรฐานพร้อม timestamp เช่น:
```
2024-06-14 10:30:45,123 - module.name - INFO - Message here
```

## ข้อแนะนำเพิ่มเติม

- ใช้ `./run-server.sh -f` หากต้องการดูล็อกแบบง่ายที่สุด
- `mcp_activity.log` เหมาะเมื่ออยากเห็นเฉพาะเหตุการณ์ของเครื่องมือ
- `mcp_server.log` แสดงรายละเอียดการทำงานทั้งหมด
- ไฟล์ล็อกถูกเก็บอยู่แม้เซิร์ฟเวอร์รีสตาร์ท ทำให้ตรวจย้อนหลังได้